<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head></h:head>
<h:body>
	<h:form id="form">

	<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" escape="true" />

	<p:commandButton value="Nuevo Post"  style="background-color: #3c763d" title="Nuevo"/>
	<p:commandButton action="#{loginView.logout}" value="Logout"  style="background-color: red"  />

	<p:dataTable var="post" value="#{dtBasicView.allPosts}" id="mitabla">

		<p:column headerText="Fecha">
			<h:outputText value="#{post.created}" >
				<f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
			</h:outputText>
		</p:column>

		<p:column headerText="Descripcion">
			<h:outputText value="#{post.description}" />
		</p:column>

		<p:column headerText="Texto">
			<h:outputText value="#{post.body}" />
		</p:column>

		<p:column headerText="Imagen">
			<h:graphicImage width="180" height="70" value="#{pageContext.request.contextPath}/./resources/images/blog/#{post.urlImage}"/>
		</p:column>


		<p:column style="width:232px;text-align: center">
			<p:commandButton update=":form:postDetail" oncomplete="PF('postDialog').show()" icon="ui-icon-search" title="Editar">
				<f:setPropertyActionListener value="#{post}" target="#{dtBasicView.selectedPost}" />
			</p:commandButton>
			<p:commandButton actionListener="#{dtBasicView.buttonAction}" id="rmv" update="mitabla" icon="ui-icon-disk" title="Eliminar" style="background-color: red"/>
			<p:commandButton value="Publicada"  style="background-color: #3c763d" title="Estado"/>

		</p:column>

	</p:dataTable>

	<ui:include src="editPost.xhtml" />

	</h:form>
</h:body>
</html>